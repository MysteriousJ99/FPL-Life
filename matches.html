<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Matches ‚Äî Fast Premier Life</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Use the same stylesheet as news.html / index.html -->
  <link rel="stylesheet" href="externalstylesheet.css">

  <!-- Google font (same as other pages) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* Palette and helpers (matches news.html) */
    :root{
      --pl-purple: #38003c;
      --pl-purple-2: #5a0065;
      --pl-blue: #4e55ff;
      --pl-red: #d81920;
      --muted:#666;
      --card-bg:#fff;
      --page-pad:20px;
      --footer-teal: #3eafc5;
      --header-bg: #f7f3ee;
    }

    html,body{height:100%}
    body{
      font-family:"Poppins",sans-serif;
      margin:0;
      background:#ffffff;
      color:#222;
      line-height:1.6;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* ---------- Header (styled same as news.html) ---------- */
    header.main-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      background-color: var(--header-bg);
      padding:15px 40px;
      border-bottom: 2px solid #ddd;
    }

    header .logo img{
      height:40px;
      display:block;
    }

    nav{
      display:flex;
      gap:20px;
      align-items:center;
    }
    nav a{
      font-weight:500;
      color:#000;
      text-decoration:none;
      padding-bottom:6px;
    }
    nav a:hover { text-decoration:underline; }
    nav a.active{
      border-bottom:3px solid var(--pl-purple);
      font-weight:700;
    }

    .login-section{
      display:flex;
      align-items:center;
      gap:15px;
    }

    .search-icon{ font-size:1.2rem; cursor:pointer; }

    /* ---------- Main layout (kept from prior page) ---------- */
    main{max-width:1200px; margin:40px auto; padding:0 20px;}

    .page-header{margin-bottom:18px;}
    .page-header h1{font-size:1.6rem; margin-bottom:6px;}
    .page-header h2{font-size:1rem; color:var(--muted); margin:0;}

    .controls { display:flex; gap:12px; align-items:center; margin-bottom:18px; flex-wrap:wrap; }
    .btn { background: var(--pl-purple); color:#fff; border:none; padding:8px 12px; border-radius:8px; font-weight:600; cursor:pointer; transition:background .15s; }
    .btn:hover { background: var(--pl-purple-2); }
    .btn.secondary { background:transparent; color:var(--pl-purple); border:1px solid rgba(56,0,60,0.12); }

    .input, .text { padding:8px 10px; border-radius:8px; border:1px solid #ddd; font-size:0.95rem; }
    label.file-label{ display:inline-block; padding:8px 12px; background:#fff; border:1px dashed #ddd; border-radius:8px; cursor:pointer; }

    /* ---------- Calendar & matches styles (kept from prior) ---------- */
    .calendar-wrap{ background:var(--card-bg); padding:16px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.06); margin-bottom:20px; }
    .cal-header{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:12px; }
    .month-year{ font-weight:700; }
    .cal-controls{ display:flex; gap:8px; align-items:center; }

    .cal-grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:8px; }
    .cal-weekday{ text-align:center; font-weight:600; color:#555; padding:6px 0; }
    .cal-day{ min-height:84px; background:#f9f9fb; border-radius:8px; padding:8px; position:relative; cursor:pointer; display:flex; flex-direction:column; }
    .cal-day.outside{ opacity:0.35; }
    .date-num{ font-weight:700; margin-bottom:8px; }
    .dot{ position:absolute; bottom:8px; left:8px; width:10px; height:10px; border-radius:50%; background:var(--pl-red); }
    .cal-day.selected{ background:linear-gradient(180deg,#fff7ff,#f4ecff); border:1px solid var(--pl-purple); }
    .cal-day.today{ outline:3px solid rgba(56,0,60,0.06); }

    .events-list{ margin-top:14px; border-top:1px dashed #eee; padding-top:12px; }
    .event-item{ background:#fff; border-left:4px solid var(--pl-blue); padding:10px; border-radius:6px; margin-bottom:10px; box-shadow:0 1px 3px rgba(0,0,0,0.04); }
    .event-item .time{ font-weight:700; margin-right:8px; color:#333; }

    .matches{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:20px; margin-top:20px; }
    .match-card{ background:#fff; border-radius:10px; padding:16px; box-shadow:0 2px 8px rgba(0,0,0,0.06); display:flex; flex-direction:column; gap:8px; }
    .match-card h3{ font-size:1.1rem; margin:0; }
    .match-card p{ margin:0; color:#333; font-size:0.95rem; }
    .match-card .buy{ margin-top:8px; padding:8px 10px; border-radius:8px; border:none; background:var(--pl-blue); color:#fff; font-weight:600; cursor:pointer; }
    .match-card .buy:hover{ background:#3b42d1; }

    .form-row{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-top:8px; }
    .muted{ color:var(--muted); font-size:0.9rem; }

    /* ---------- Footer (match news look) ---------- */
    footer.main-footer{
      background-color: var(--footer-teal);
      color: #fff;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      align-items:center;
      padding:25px 40px;
      font-size:0.9em;
    }

    .footer-left p{ margin:0 0 10px; }
    .social-icons img{ width:28px; height:28px; margin-right:10px; vertical-align:middle; object-fit:contain; }
    .footer-right p{ margin:0; text-align:right; }

    @media (max-width:900px){
      .cal-grid{ gap:6px; }
      .cal-day{ min-height:64px; }
      .controls{ flex-direction:column; align-items:stretch; }
      footer.main-footer{ padding:18px; }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="main-header">
    <div class="logo">
      <a href="index.html"><img src="images/Logo.png" alt="Website Logo"></a>
    </div>

    <nav>
      <a href="index.html">Home</a>
      <a href="news.html">News</a>
      <a href="matches.html" class="active">Matches</a>
      <a href="ClubsandPlayers.html">Clubs & Players</a>
      <a href="coach&league.html">Other Leagues/Coaches</a>
      <a href="LiveDiscussion.html">Discussion</a>
    </nav>

    <div class="login-section">
      <a href="login.html">Login</a>
      <span class="search-icon">üîç</span>
    </div>
  </header>

  <main>
    <div class="page-header">
      <h1>Schedule</h1>
      <h2>Upcoming & Past Matches ‚Äî view by calendar or list</h2>
    </div>

    <!-- Controls -->
    <div class="controls" aria-label="Event import and controls">
      <label class="file-label" title="Upload CSV (title,date,time,venue,url)">
        Import CSV
        <input type="file" id="csvFile" accept=".csv,text/csv">
      </label>

      <input type="text" id="icalUrl" class="input" placeholder="Paste public Google Calendar ICS URL (https://.../basic.ics)">
      <button class="btn" id="importIcalBtn">Import iCal</button>
      <button class="btn secondary" id="toggleAdd">Add Event</button>
      <button class="btn" id="clearStorage" title="Remove imported events from local storage">Clear Saved Events</button>
    </div>

    <!-- quick add -->
    <div id="addForm" style="display:none; margin-bottom:14px; background:#fff; padding:12px; border-radius:8px; box-shadow:0 1px 4px rgba(0,0,0,0.04);">
      <div class="form-row">
        <input id="addTitle" class="input" placeholder="Title (Team A vs Team B)">
        <input id="addDate" class="input" placeholder="YYYY-MM-DD">
        <input id="addTime" class="input" placeholder="HH:MM (24h)">
        <input id="addVenue" class="input" placeholder="Venue">
        <input id="addUrl" class="input" placeholder="Optional URL">
        <button class="btn" id="addEventBtn">Add</button>
      </div>
      <div class="muted">Tip: date format YYYY-MM-DD. Example CSV columns: title,date,time,venue,url</div>
    </div>

    <!-- Calendar -->
    <div class="calendar-wrap" id="calendarWrap" aria-live="polite">
      <div class="cal-header">
        <div class="month-year" id="monthYear">Month Year</div>
        <div class="cal-controls">
          <button class="btn" id="prevMonth">&lt; Prev</button>
          <button class="btn" id="nextMonth">Next &gt;</button>
        </div>
      </div>

      <div class="cal-grid" id="weekdayHead" aria-hidden="true">
        <div class="cal-weekday">Sun</div>
        <div class="cal-weekday">Mon</div>
        <div class="cal-weekday">Tue</div>
        <div class="cal-weekday">Wed</div>
        <div class="cal-weekday">Thu</div>
        <div class="cal-weekday">Fri</div>
        <div class="cal-weekday">Sat</div>
      </div>

      <div class="cal-grid" id="calendarGrid" style="margin-top:10px;"></div>

      <div class="events-list" id="eventsList">
        <p class="muted">Select a day to view matches.</p>
      </div>
    </div>

    <!-- Search -->
    <div style="margin-top:8px; display:flex; gap:8px; align-items:center;">
      <input id="matchSearch" class="input" placeholder="Filter match cards (team, venue, date)">
      <div class="muted">Matches below are generated from the calendar events.</div>
    </div>

    <!-- Match cards auto-generated -->
    <section class="matches" id="matchesGrid" aria-live="polite" style="margin-top:16px"></section>

  </main>

  <!-- FOOTER styled to match news.html -->
  <footer class="main-footer">
    <div class="footer-left">
      <p>Check out other links here for the official Premier League Instagram and Twitter page</p>
      <div class="social-icons">
        <img src="images/twitter page.jpg" alt="Twitter" />
        <img src="images/instagram.jpg" alt="Instagram" />
      </div>
    </div>

    <div class="footer-right">
      <p>Contact information: 302-555-6611<br>wearedefinitelyreal@gmail.com</p>
    </div>
  </footer>

  <!-- Keep existing script (no functional changes) -->
  <script>
  /********************************************************
   * Matches page script
   * - Maintains events[] (load/save to localStorage)
   * - Renders calendar and event cards automatically
   * - Imports from CSV and public iCal (.ics)
   *********************************************************/

  const seedEvents = [
    { id: 1, title: "Liverpool vs Man United", date: "2025-09-15", time: "16:30", venue: "Anfield, Liverpool, UK", url: "" },
    { id: 2, title: "Arsenal vs Chelsea", date: "2025-09-20", time: "19:45", venue: "Emirates Stadium, London, UK", url: "" },
    { id: 3, title: "USA vs ECU", date: "2025-10-10", time: "20:30", venue: "Q2 Stadium, Austin, TX, USA", url: "" },
    { id: 4, title: "USA vs AUS", date: "2025-10-14", time: "21:00", venue: "DICK'S Sporting Goods Park, Commerce City, CO, USA", url: "" },
    { id: 5, title: "USA vs POR", date: "2025-10-23", time: "19:00", venue: "Subaru Park, Chester, PA, USA", url: "" },
    { id: 6, title: "Liverpool vs Brighton", date: "2025-11-02", time: "15:00", venue: "Anfield, Liverpool, UK", url: "" }
  ];

  const STORAGE_KEY = 'fpl_events_v1';
  let events = loadEvents();

  function loadEvents(){
    try {
      const raw = localStorage.getItem(STORAGE_KEY);
      if(raw){
        const parsed = JSON.parse(raw);
        if(Array.isArray(parsed) && parsed.length) return parsed;
      }
    } catch(e){ console.warn('Could not parse events from storage', e); }
    return JSON.parse(JSON.stringify(seedEvents));
  }

  function saveEvents(){
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(events));
    } catch(e){ console.warn('Could not save events', e); }
  }

  const pad = n => n < 10 ? '0'+n : n;
  function toISODate(d){ const y=d.getFullYear(), m=pad(d.getMonth()+1), day=pad(d.getDate()); return `${y}-${m}-${day}`; }

  let today = new Date();
  let currentMonth = today.getMonth();
  let currentYear = today.getFullYear();
  let selectedDateISO = null;

  const monthYearNode = document.getElementById('monthYear');
  const calendarGrid = document.getElementById('calendarGrid');
  const eventsList = document.getElementById('eventsList');
  const prevBtn = document.getElementById('prevMonth');
  const nextBtn = document.getElementById('nextMonth');
  const matchSearch = document.getElementById('matchSearch');
  const matchesGrid = document.getElementById('matchesGrid');

  const csvFile = document.getElementById('csvFile');
  const icalUrl = document.getElementById('icalUrl');
  const importIcalBtn = document.getElementById('importIcalBtn');
  const toggleAdd = document.getElementById('toggleAdd');
  const addForm = document.getElementById('addForm');
  const addEventBtn = document.getElementById('addEventBtn');
  const addTitle = document.getElementById('addTitle');
  const addDate = document.getElementById('addDate');
  const addTime = document.getElementById('addTime');
  const addVenue = document.getElementById('addVenue');
  const addUrl = document.getElementById('addUrl');
  const clearStorageBtn = document.getElementById('clearStorage');

  function nextId(){ return events.reduce((m,e)=>Math.max(m,e.id||0),0)+1; }

  function eventsForDate(iso){
    return events.filter(e => e.date === iso).sort((a,b)=> (a.time||'').localeCompare(b.time||''));
  }

  function renderCalendar(month, year){
    monthYearNode.textContent = `${['January','February','March','April','May','June','July','August','September','October','November','December'][month]} ${year}`;

    const firstOfMonth = new Date(year, month, 1);
    const startDay = firstOfMonth.getDay();
    const daysInMonth = new Date(year, month+1, 0).getDate();
    const prevMonthLastDate = new Date(year, month, 0).getDate();

    calendarGrid.innerHTML = '';
    const totalCells = 42;

    for(let i=0;i<totalCells;i++){
      const cell = document.createElement('div');
      cell.className = 'cal-day';

      const dayIndex = i - startDay + 1;
      let displayDay, inCurrentMonth;
      if(i < startDay){
        displayDay = prevMonthLastDate - (startDay -1 - i);
        inCurrentMonth = false;
        cell.classList.add('outside');
      } else if(dayIndex > daysInMonth){
        displayDay = dayIndex - daysInMonth;
        inCurrentMonth = false;
        cell.classList.add('outside');
      } else {
        displayDay = dayIndex;
        inCurrentMonth = true;
      }

      const dateNum = document.createElement('div');
      dateNum.className = 'date-num';
      dateNum.textContent = displayDay;
      cell.appendChild(dateNum);

      let cellDateISO;
      if(inCurrentMonth){
        cellDateISO = `${year}-${pad(month+1)}-${pad(displayDay)}`;
      } else {
        let cellMonth = month;
        let cellYear = year;
        if(i < startDay){
          if(month === 0){ cellMonth = 11; cellYear = year - 1; } else cellMonth = month - 1;
        } else {
          if(month === 11){ cellMonth = 0; cellYear = year + 1; } else cellMonth = month + 1;
        }
        cellDateISO = `${cellYear}-${pad(cellMonth+1)}-${pad(displayDay)}`;
      }

      if(cellDateISO === toISODate(new Date())) cell.classList.add('today');

      const dayEvents = eventsForDate(cellDateISO);
      if(dayEvents.length){
        const dot = document.createElement('div'); dot.className='dot'; cell.appendChild(dot);
      }

      (function(iso, node){
        node.addEventListener('click', () => {
          document.querySelectorAll('.cal-day.selected').forEach(n=>n.classList.remove('selected'));
          node.classList.add('selected');
          selectedDateISO = iso;
          renderEventsForSelectedDate();
        });
      })(cellDateISO, cell);

      calendarGrid.appendChild(cell);
    }

    if(toISODate(new Date()).startsWith(`${currentYear}-${pad(currentMonth+1)}`)){
      const nodes = document.querySelectorAll('#calendarGrid .cal-day.today');
      if(nodes && nodes.length){
        nodes[0].classList.add('selected');
        selectedDateISO = toISODate(new Date());
        renderEventsForSelectedDate();
      }
    } else {
      selectedDateISO = null;
      eventsList.innerHTML = '<p class="muted">Select a day to view matches.</p>';
    }
  }

  function renderEventsForSelectedDate(){
    eventsList.innerHTML = '';
    if(!selectedDateISO){
      eventsList.innerHTML = '<p class="muted">Select a day to view matches.</p>'; return;
    }
    const list = eventsForDate(selectedDateISO);
    if(!list.length){ eventsList.innerHTML = `<p class="muted">No matches on ${selectedDateISO}.</p>`; return; }
    list.forEach(ev=>{
      const item = document.createElement('div'); item.className='event-item';
      item.innerHTML = `
        <div><span class="time">${ev.time||''}</span> <strong>${ev.title}</strong></div>
        <div style="font-size:0.9rem;color:#555">${ev.venue||''}</div>
        ${ev.url?`<div style="margin-top:6px"><a href="${ev.url}" target="_blank">More info</a></div>`:''}
      `;
      eventsList.appendChild(item);
    });
  }

  function renderMatchCards(filter=''){
    matchesGrid.innerHTML = '';
    const q = filter ? filter.toLowerCase().trim() : '';
    const sorted = events.slice().sort((a,b)=>{
      if(a.date !== b.date) return a.date.localeCompare(b.date);
      return (a.time||'').localeCompare(b.time||'');
    });
    sorted.forEach(ev=>{
      const text = `${ev.title} ${ev.venue} ${ev.date} ${ev.time}`.toLowerCase();
      if(q && !text.includes(q)) return;
      const card = document.createElement('div'); card.className='match-card';
      card.innerHTML = `
        <h3>${ev.title}</h3>
        <p><strong>${ev.date}</strong> ${ev.time ? '¬∑ ' + ev.time : ''}</p>
        <p>${ev.venue || ''}</p>
        ${ev.url ? `<p><a href="${ev.url}" target="_blank">Event link</a></p>` : ''}
        <button class="buy" data-id="${ev.id}">BUY TICKETS</button>
      `;
      matchesGrid.appendChild(card);
    });

    document.querySelectorAll('.match-card .buy').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const id = Number(e.currentTarget.dataset.id);
        const ev = events.find(x=>x.id===id);
        if(ev && ev.url) window.open(ev.url, '_blank');
        else alert('No purchase link available for this match.');
      });
    });
  }

  document.getElementById('prevMonth').addEventListener('click', ()=>{
    if(currentMonth === 0){ currentMonth = 11; currentYear--; } else currentMonth--;
    renderCalendar(currentMonth, currentYear);
  });
  document.getElementById('nextMonth').addEventListener('click', ()=>{
    if(currentMonth === 11){ currentMonth = 0; currentYear++; } else currentMonth++;
    renderCalendar(currentMonth, currentYear);
  });

  matchSearch.addEventListener('input', (e)=> renderMatchCards(e.target.value) );

  csvFile.addEventListener('change', (e)=>{
    const f = e.target.files[0];
    if(!f) return;
    const reader = new FileReader();
    reader.onload = (ev)=>{
      try {
        const text = ev.target.result;
        const parsed = parseCSV(text);
        let added = 0;
        parsed.forEach(obj=>{
          const title = obj.title || obj.Title || obj.NAME || obj.name || '';
          const date = (obj.date || obj.Date || '').trim();
          const time = (obj.time || obj.Time || '').trim();
          const venue = obj.venue || obj.Venue || obj.location || obj.Location || '';
          const url = obj.url || obj.Url || obj.URL || '';
          if(!title || !date) return;
          events.push({ id: nextId(), title: title.trim(), date: date.trim(), time: time, venue: venue.trim(), url: url.trim() });
          added++;
        });
        if(added) {
          saveEvents(); renderCalendar(currentMonth,currentYear); renderMatchCards(matchSearch.value);
          alert('Imported ' + added + ' events from CSV.');
        } else alert('No valid rows found in CSV. Make sure each row has at least title and date.');
      } catch(err){ alert('Error parsing CSV: ' + err.message); }
    };
    reader.readAsText(f);
    e.target.value = '';
  });

  function parseCSV(text){
    const lines = text.split(/\r?\n/).filter(l=>l.trim()!=='');
    if(!lines.length) return [];
    const delimiter = detectDelimiter(lines[0]);
    const headers = lines[0].split(delimiter).map(h=>h.trim());
    const rows = lines.slice(1);
    const out = [];
    rows.forEach(r=>{
      let cols = r.split(delimiter);
      if(cols.length === 1 && cols[0].indexOf(',') !== -1){
        cols = r.split(',');
      }
      if(cols.length < 1) return;
      const obj = {};
      for(let i=0;i<headers.length;i++){
        obj[headers[i]] = (cols[i] || '').trim();
      }
      out.push(obj);
    });
    const known = ['title','date','time','venue','url','Title','Date','Time','Venue','URL'];
    const headerHasKnown = headers.some(h => known.includes(h));
    if(!headerHasKnown){
      const arr = text.split(/\r?\n/).filter(l=>l.trim()!=='');
      const res = [];
      arr.forEach(line=>{
        const cols = line.split(delimiter).map(c=>c.trim());
        res.push({
          title: cols[0]||'',
          date: cols[1]||'',
          time: cols[2]||'',
          venue: cols[3]||'',
          url: cols[4]||''
        });
      });
      return res;
    }
    return out;
  }
  function detectDelimiter(line){
    if(line.indexOf(',')>-1) return ',';
    if(line.indexOf(';')>-1) return ';';
    if(line.indexOf('\t')>-1) return '\t';
    return ',';
  }

  importIcalBtn.addEventListener('click', async ()=>{
    const url = icalUrl.value.trim();
    if(!url){ alert('Paste a public Google Calendar ICS URL into the input first.'); return; }
    try {
      const resp = await fetch(url);
      if(!resp.ok) throw new Error('Network response not ok ('+resp.status+')');
      const text = await resp.text();
      const parsed = parseICS(text);
      let added = 0;
      parsed.forEach(it=>{
        let dt = it.start;
        if(!dt) return;
        const dts = dt.replace(/Z$/,'');
        let y = dts.substr(0,4), m=dts.substr(4,2), dd=dts.substr(6,2);
        let hh = dts.length >= 9 ? dts.substr(9,2) : '';
        let mm = dts.length >= 11 ? dts.substr(11,2) : '';
        const date = `${y}-${m}-${dd}`;
        const time = hh ? `${hh}:${mm}` : '';
        const title = it.summary || 'Event';
        const venue = it.location || '';
        events.push({ id: nextId(), title, date, time, venue, url: it.url || ''});
        added++;
      });
      if(added){
        saveEvents(); renderCalendar(currentMonth,currentYear); renderMatchCards(matchSearch.value);
        alert('Imported ' + added + ' events from iCal.');
      } else alert('No events found in the ICS file.');
    } catch(err){
      console.error(err);
      alert('Could not fetch/parse ICS file. Note: Google Calendar public ICS links should be publicly accessible; CORS may block fetch in some browsers/hosts. If blocked, download the .ics file and convert to CSV or upload a CSV.');
    }
  });

  function parseICS(text){
    const events = [];
    const unfolded = text.replace(/\r\n[ \t]/g,'');
    const vevents = unfolded.split(/BEGIN:VEVENT/i).slice(1);
    vevents.forEach(block=>{
      const endIdx = block.indexOf('END:VEVENT');
      if(endIdx === -1) return;
      const content = block.substring(0,endIdx);
      const get = (prop) => {
        const re = new RegExp(prop + "(:|;)[^\\r\\n]*","i");
        const m = content.match(re);
        if(!m) return null;
        const line = m[0];
        const idx = line.indexOf(':');
        return idx>-1 ? line.substring(idx+1).trim() : line.replace(/^.*?:/,'').trim();
      };
      const summary = get('SUMMARY');
      const dtstart = get('DTSTART');
      const dtend = get('DTEND');
      const location = get('LOCATION');
      const url = get('URL') || get('ATTENDEE') || '';
      events.push({ summary, start: dtstart, end: dtend, location, url });
    });
    return events;
  }

  toggleAdd.addEventListener('click', ()=> addForm.style.display = addForm.style.display === 'none' ? 'block' : 'none');
  addEventBtn.addEventListener('click', ()=>{
    const title = addTitle.value.trim(); const date = addDate.value.trim(); const time = addTime.value.trim();
    const venue = addVenue.value.trim(); const url = addUrl.value.trim();
    if(!title || !date){ alert('Please provide at least title and date (YYYY-MM-DD).'); return; }
    events.push({ id: nextId(), title, date, time, venue, url });
    saveEvents(); renderCalendar(currentMonth,currentYear); renderMatchCards(matchSearch.value);
    addTitle.value = addDate.value = addTime.value = addVenue.value = addUrl.value = '';
    addForm.style.display = 'none';
  });

  clearStorageBtn.addEventListener('click', ()=>{
    if(!confirm('Clear saved events and reset to default sample events?')) return;
    localStorage.removeItem(STORAGE_KEY);
    events = JSON.parse(JSON.stringify(seedEvents));
    renderCalendar(currentMonth,currentYear); renderMatchCards('');
  });

  renderCalendar(currentMonth, currentYear);
  renderMatchCards();

  icalUrl.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') importIcalBtn.click(); });

  </script>

</body>
</html>


