<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FPL News ‚Äî Fast Premier Life</title>

  <link rel="stylesheet" href="externalstylesheet.css">

  <style>
    /* ---------- Basic Header & Nav ---------- */
    .logo img { height: 40px; display: block; }
    header { display: flex; justify-content: space-between; align-items: center; padding: 12px 20px; }
    nav a { margin-right: 18px; font-weight: 500; color: inherit; text-decoration: none; }
    nav a:hover { text-decoration: underline; }
    nav a.active { border-bottom: 3px solid #38003c; font-weight: 700; }

    /* small header-right area layout to hold login/search + theme selector */
    .header-right { display:flex; align-items:center; gap:12px; }

    /* theme select (keeps compact in header) */
    #themeSelect {
      padding:6px 8px;
      border-radius:8px;
      border:1px solid rgba(0,0,0,0.08);
      background: #fff;
      font-weight:600;
      cursor:pointer;
    }

    /* ---------- Featured images layout ---------- */
    .featured-images { display:flex; overflow:hidden; margin-bottom:15px; }
    .featured-images-inner { display:flex; gap:10px; transition: transform 0.4s ease; will-change: transform; }
    .featured-item {
      flex: 0 0 calc(33.333% - 6.66px);
      min-height:170px;
      max-height:260px;
      border-radius:8px;
      position: relative;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      background-color:#222;
      color:#fff;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .featured-item:hover { transform: translateY(-4px); box-shadow: 0 8px 22px rgba(0,0,0,0.18); }
    .image-wrap{ width:100%; height:100%; position:relative; background-position:center; background-size:cover; background-repeat:no-repeat; }
    .image-wrap img{ display:block; width:100%; height:100%; object-fit:cover; opacity:0; transition: opacity .28s ease; }
    .image-wrap img.loaded { opacity:1; }
    .featured-caption {
      position:absolute; left:10px; right:10px; bottom:8px; padding:6px 8px; background: rgba(0,0,0,0.55);
      color:#fff; border-radius:6px; font-size:0.95rem; backdrop-filter: blur(2px);
    }

    .featured-controls { margin-top:10px; display:flex; gap:8px; justify-content:flex-end; align-items:center; }
    .btn { background: #38003c; color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; font-weight:600; }
    .btn.secondary { background:#fff; color:#38003c; border:1px solid rgba(56,0,60,0.12); }

    @media (max-width:700px){
      .featured-item { flex: 1 1 100%; min-height:140px; max-height:none; }
      header { padding: 12px 14px; }
      nav a { margin-right:10px; font-size:0.95rem; }
      #themeSelect { display:none; } /* hide theme selector on very small screens to save space */
    }

    /* Social Share Buttons */
    .social-sharing { margin-top: 25px; display: flex; gap: 15px; flex-wrap: wrap; }
    .social-sharing button { color: #fff; border: none; border-radius: 6px; padding: 10px 16px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
    #share-facebook{ background-color:#38003c } #share-twitter{ background-color:#00a3e0 } #share-youtube{ background-color:#d81920 }

    /* Footer */
    footer { background-color: #3eafc5; color: #fff; display: flex; justify-content: space-between; flex-wrap: wrap; align-items: center; padding: 25px 40px; font-size: 0.9em; }
    .footer-left p { margin: 0 0 10px; }
    .footer-left img, .footer-right img { width: 28px; height: 28px; object-fit:contain; margin-right: 8px; vertical-align: middle; }
    .footer-right p { margin: 0; text-align: right; }

    .featured-item:focus { outline: 3px solid rgba(56,0,60,0.12); }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="logo">
      <a href="index.html"><img id="siteLogo" src="images/Logo.png" alt="Website Logo"></a>
    </div>

    <nav>
      <a href="index.html">Home</a>
      <a href="news.html" class="active">News</a>
      <a href="matches.html">Matches</a>
      <a href="ClubsandPlayers.html">Clubs & Players</a>
      <a href="coach&league.html">Other Leagues/Coaches</a>
      <a href="LiveDiscussion.html">Discussion</a>
    </nav>

    <div class="header-right">
      <a href="login.html">Login</a>
      <span class="search-icon" title="Search">üîç</span>

      <!-- THEME SELECTOR (integrated from coach&league.html) -->
      <select id="themeSelect" aria-label="Choose site theme">
        <option value="default">Theme</option>
        <option value="chelsea">Chelsea</option>
        <option value="mancity">Manchester City</option>
        <option value="manutd">Manchester United</option>
        <option value="tottenham">Tottenham</option>
        <option value="liverpool">Liverpool</option>
        <option value="arsenal">Arsenal</option>
      </select>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main>
    <h1>News</h1>

    <!-- FEATURED ARTICLE -->
    <section class="featured-article" style="background-color:#f9f4ef; padding:20px; border-radius:10px;">
      <h2 id="featuredTitle">The spirit of the Premier League ‚Äî captured</h2>

      <!-- Featured images carousel -->
      <div class="featured-images" id="featuredImages" aria-live="polite">
        <div class="featured-images-inner" id="featuredInner" role="list"></div>
      </div>

      <div class="featured-controls">
        <button class="btn secondary" id="prevFeature" aria-label="Previous featured">Prev</button>
        <button class="btn" id="nextFeature" aria-label="Next featured">Next</button>
      </div>

      <h3 id="featuredSub">Iconic moments, stadium atmospheres and fan passion ‚Äî consistently present</h3>
      <p><a id="featuredAuthor" href="#">Fast Premier Life</a> curates imagery that represents the essence of the league.</p>
      <p id="featuredExcerpt">Every time you open this page you‚Äôll see iconic Premier League scenes chosen to capture the competition‚Äôs energy.</p>

      <h3>Share this page:</h3>
      <div class="social-sharing">
        <button id="share-facebook">Share on Facebook</button>
        <button id="share-twitter">Share on Twitter</button>
        <button id="share-youtube">Search on YouTube</button>
      </div>
    </section>

    <!-- ARTICLE GRID -->
    <div class="content-grid" style="display:grid; grid-template-columns:2fr 1fr; gap:30px; margin-top:30px;">
      <section class="articles" id="articleList">
        <article style="background:#fff; padding:20px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.08); margin-bottom:20px;">
          <h3>Analysis: What to expect from Postecoglou at Nottingham Forest</h3>
          <p><strong>Alex Keble</strong> analyses Australian‚Äôs tactics and the players who could thrive under his stewardship.</p>
        </article>

        <article style="background:#fff; padding:20px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.08); margin-bottom:20px;">
          <h3>Postecoglou replaces Nuno as Nottingham Forest head coach</h3>
          <p>Nottingham Forest announced the appointment of <a href="#">Ange Postecoglou</a> as head coach, following the departure of Nuno Esp√≠rito Santo.</p>
        </article>

        <article id="kitsArticle" style="background:#fff; padding:20px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.08);">
          <h3>Premier League Club Kits for 2025/26</h3>
          <p>See every Premier League club‚Äôs new threads for 2025/26 season. Liverpool were the last club to reveal their sea-green third kit.</p>
        </article>
      </section>

      <!-- NEWSLETTER SIDEBAR -->
      <aside class="newsletter" style="background:#f7f3ee; padding:25px; border-radius:10px; text-align:center;">
        <h4>Subscribe to Newsletter</h4>
        <button style="background:#cbb2ff; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-weight:600;">Login</button>
      </aside>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="footer-left">
      <p>Check out other links for the official Premier League Instagram and Twitter page:</p>
      <img id="twitterFooter" src="images/twitter page.jpg" alt="Twitter Logo" width="28" height="28">
      <img id="instagramFooter" src="images/instagram.jpg" alt="Instagram Logo" width="28" height="28">
    </div>
    <div class="footer-right">
      <p>302-555-6611</p>
      <p>wearedefintelyreal@gmail.com</p>
    </div>
  </footer>

  <!-- Featured images + carousel script (robust loader + measured layout) -->
  <script>
  (function(){
    // use the exact filenames you provided ‚Äî update if your folder/names differ
    const featuredImagesStatic = [
      { id: 'ess1', title: 'Historic stadium fa√ßade ‚Äî tradition', file: 'images/players.webp', alt: 'Historic stadium', url: '#', bgColor: '#123b1e' },
      { id: 'ess2', title: 'Packed stadium ‚Äî matchday atmosphere', file: 'images/FPL.image.webp', alt: 'Crowd celebrating with trophy', url: '#', bgColor: '#082a3a' },
      { id: 'ess3', title: 'Iconic finishing ‚Äî celebration', file: 'images/FPL.2.webp', alt: 'Players celebrating in the dressing room', url: '#', bgColor: '#6b1f1f' },
      { id: 'ess4', title: 'Back Flip', file: 'images/FPL33.webp', alt: 'Do a flip!', url: '#', bgColor: '#6b1f1f' }

    ];

    const placeholderImg = 'images/placeholder-news.jpg';
    const featuredInner = document.getElementById('featuredInner');
    const featuredTitle = document.getElementById('featuredTitle');
    const featuredSub = document.getElementById('featuredSub');
    const featuredAuthor = document.getElementById('featuredAuthor');
    const featuredExcerpt = document.getElementById('featuredExcerpt');

    let featureIndex = 0;
    let autoRotateTimer = null;
    const ROTATE_INTERVAL = 7000;

    // preload with a Promise; resolves ok:true when loaded else ok:false
    function preloadUrl(rawPath, timeout = 6000){
      return new Promise((resolve) => {
        try {
          const url = encodeURI(rawPath);
          const img = new Image();
          let done = false;
          const timer = setTimeout(()=> {
            if(done) return;
            done = true;
            img.onload = img.onerror = null;
            resolve({ ok:false, url });
          }, Math.min(timeout,4000));

          img.onload = () => {
            if(done) return;
            done = true;
            clearTimeout(timer);
            img.onload = img.onerror = null;
            resolve({ ok:true, url });
          };
          img.onerror = () => {
            if(done) return;
            done = true;
            clearTimeout(timer);
            img.onload = img.onerror = null;
            resolve({ ok:false, url });
          };
          img.src = url;
        } catch(e){
          resolve({ ok:false, url: rawPath });
        }
      });
    }

    // create tile DOM; image will be set after preload
    function createFeaturedTile(art){
      const wrapOuter = document.createElement('div');
      wrapOuter.className = 'featured-item';
      wrapOuter.setAttribute('tabindex','0');
      wrapOuter.style.backgroundColor = art.bgColor || '#222';

      const imageWrap = document.createElement('div');
      imageWrap.className = 'image-wrap';

      const img = document.createElement('img');
      img.alt = art.alt || art.title || '';
      img.loading = 'lazy';
      img.setAttribute('width','450');
      img.setAttribute('height','350');
      img.decoding = 'async';
      // start hidden; will fade in on load
      img.style.opacity = '0';

      // handle load / error
      img.addEventListener('load', ()=>{ img.classList.add('loaded'); img.style.opacity='1'; });
      img.addEventListener('error', ()=>{ img.src = placeholderImg; img.style.opacity='1'; });

      wrapOuter.addEventListener('click', ()=>{ if(art.url && art.url!=='#') window.open(art.url,'_blank'); });
      wrapOuter.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); wrapOuter.click(); } });

      const cap = document.createElement('div');
      cap.className = 'featured-caption';
      cap.textContent = art.title || '';

      imageWrap.appendChild(img);
      wrapOuter.appendChild(imageWrap);
      wrapOuter.appendChild(cap);

      // kick off preload ‚Äî when done set both img.src and background-image
      (async ()=>{
        const result = await preloadUrl(art.file);
        const finalSrc = result.ok ? result.url : placeholderImg;
        // set <img> to the final resolved URL (so the element can load and fade)
        img.src = finalSrc;
        // also set background image on the wrapper so even during slow load we have a fallback visual
        imageWrap.style.backgroundImage = `url('${encodeURI(finalSrc)}')`;
      })();

      return wrapOuter;
    }

    // render tiles into DOM and position the carousel correctly
    function renderFeatured(index=0){
      featuredInner.innerHTML = '';
      // append tiles (we will measure width after images inserted)
      for(let i=0;i<featuredImagesStatic.length;i++){
        const tile = createFeaturedTile(featuredImagesStatic[i]);
        featuredInner.appendChild(tile);
      }

      // Wait for layout/paint so offsets are available; use requestAnimationFrame twice
      requestAnimationFrame(()=> {
        requestAnimationFrame(()=> {
          // compute width of first tile (includes gap because we used gap:10px in CSS)
          const first = featuredInner.children[0];
          if(first){
            // gap is applied in layout; measure one tile width and the computed gap
            const tileWidth = first.getBoundingClientRect().width;
            // estimate gap by difference between offset of child 1 and child 0
            let gap = 10;
            if(featuredInner.children.length > 1){
              const r0 = featuredInner.children[0].getBoundingClientRect();
              const r1 = featuredInner.children[1].getBoundingClientRect();
              gap = Math.round(r1.left - (r0.left + r0.width));
            }
            const step = tileWidth + gap;
            featuredInner.style.transform = `translateX(-${index * step}px)`;
          }
        });
      });

      populateMainFeatured(featuredImagesStatic[index % featuredImagesStatic.length]);
    }

    function populateMainFeatured(art){
      if(!art) return;
      featuredTitle.textContent = art.title || 'Premier League';
      featuredSub.textContent = art.title || '';
      featuredAuthor.textContent = 'Fast Premier Life';
      featuredAuthor.href = art.url || '#';
      featuredExcerpt.textContent = 'Curated imagery representing the spirit and history of the Premier League.';
    }

    document.getElementById('prevFeature').addEventListener('click', ()=>{
      featureIndex = (featureIndex - 1 + featuredImagesStatic.length) % featuredImagesStatic.length;
      renderFeatured(featureIndex);
      restartAutoRotate();
    });

    document.getElementById('nextFeature').addEventListener('click', ()=>{
      featureIndex = (featureIndex + 1) % featuredImagesStatic.length;
      renderFeatured(featureIndex);
      restartAutoRotate();
    });

    function startAutoRotate(){
      stopAutoRotate();
      autoRotateTimer = setInterval(()=>{
        featureIndex = (featureIndex + 1) % featuredImagesStatic.length;
        renderFeatured(featureIndex);
      }, ROTATE_INTERVAL);
    }
    function stopAutoRotate(){ if(autoRotateTimer) clearInterval(autoRotateTimer); autoRotateTimer = null; }
    function restartAutoRotate(){ stopAutoRotate(); startAutoRotate(); }

    // share buttons
    const currentShareUrl = window.location.href;
    const currentShareTitle = document.title;
    document.getElementById("share-facebook").addEventListener("click", ()=>{ window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentShareUrl)}`, "_blank"); });
    document.getElementById("share-twitter").addEventListener("click", ()=>{ window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(currentShareUrl)}&text=${encodeURIComponent(currentShareTitle)}`, "_blank"); });
    document.getElementById("share-youtube").addEventListener("click", ()=>{ window.open(`https://www.youtube.com/results?search_query=Premier+League+${encodeURIComponent(currentShareTitle)}`, "_blank"); });

    // footer setup
    function setupFooterImages(){
      const tw = document.getElementById('twitterFooter');
      const ig = document.getElementById('instagramFooter');
      if(!tw || !ig) return;
      const footerPlaceholder = 'images/placeholder-social.jpg';
      tw.onerror=()=>{ if(tw.src!==footerPlaceholder) tw.src=footerPlaceholder; };
      ig.onerror=()=>{ if(ig.src!==footerPlaceholder) ig.src=footerPlaceholder; };
      tw.style.width='28px'; tw.style.height='28px';
      ig.style.width='28px'; ig.style.height='28px';
      tw.style.cursor='pointer'; ig.style.cursor='pointer';
      tw.addEventListener('click', ()=> window.open('https://x.com/premierleague','_blank'));
      ig.addEventListener('click', ()=> window.open('https://www.instagram.com/premierleague/','_blank'));
    }

    // initial render (will kick off preload)
    renderFeatured(0);
    startAutoRotate();
    setupFooterImages();

    // pause rotation on focus
    const featuredImagesNodeRef = document.getElementById('featuredImages');
    featuredImagesNodeRef.addEventListener('focusin', stopAutoRotate);
    featuredImagesNodeRef.addEventListener('focusout', restartAutoRotate);

    // reposition on resize to keep correct slide
    window.addEventListener('resize', ()=> renderFeatured(featureIndex));
  })();
  </script>

  <!-- THEME SCRIPT (integrated from coach&league.html) -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const themeSelect = document.getElementById("themeSelect");
    if(!themeSelect) return;

    const themeClasses = ["chelsea","mancity","manutd","tottenham","liverpool","arsenal"];
    const saved = localStorage.getItem("selectedTeam") || "default";

    document.body.classList.remove(...themeClasses);
    if (saved !== "default") document.body.classList.add(saved);
    themeSelect.value = saved;

    themeSelect.addEventListener("change", () => {
      const team = themeSelect.value;
      document.body.classList.remove(...themeClasses);
      if (team !== "default") document.body.classList.add(team);
      localStorage.setItem("selectedTeam", team);
    });
  });
  </script>

</body>
</html>
